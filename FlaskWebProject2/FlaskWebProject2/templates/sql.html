{% extends "layout.html" %}

{% block content %}

{% if previous_sql is defined %}
<div>
    <form role="form" action="#" method="POST">
        <div class="form-group">
            <label for="name"> 执行SQL命令 <em style="color:red;">危险功能，请谨慎使用</em></label>
            <textarea class="form-control" name="sql_cmd" rows="3" onsubmit="return true;">{{previous_sql}}</textarea>
            <button type="submit" class="btn btn-primary">提交</button>
        </div>
    </form>
</div>

{% if result is defined %}
<span>记录行数： {{result | length}}</span>
<table class="table table-striped table-hover table-bordered">
    <tbody>
        {% for record in result %}
        <tr>
            {% for item in record %}
            <td>{{item | string}}</td>
            {% endfor %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}

{% if nrows is defined %}
<span>结果： {{nrows}}</span>
{% endif %}

{% else %}

<div>
    <form role="form" action="#" method="POST">
        <div class="form-group">
            <label for="name"> 执行SQL命令 <em style="color:red;">危险功能，请谨慎使用</em></label>
            <textarea class="form-control" name="sql_cmd" rows="3" onsubmit="return true;"></textarea>
            <button type="submit" class="btn btn-primary">提交</button>
        </div>
    </form>
</div>
    {% endif %}

    {% endblock %}
